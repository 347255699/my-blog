<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>认真学习 kubernetes——搭建 Harbor | Menfre Blog</title>
    <meta name="description" content="通常情况下我们需要一个类似 Java Maven Nexus 一样的私库作为我们私有注册中心以便用来维护我们的应用容器。

1. docker-compose

这里我们选择 docker-compose 的方式来安装。查询 docker-compose releases

这里我们下载的版本是 [1 ...">
    <meta name="generator" content="VuePress 1.4.0">
    <script src="https://www.googletagmanager.com/gtag/js?id=UA-164957843-1" async="true"></script>
  <script>window.dataLayer = window.dataLayer || [];            function gtag(){dataLayer.push(arguments);}            gtag('js', new Date());            gtag('config', 'UA-164957843-1');</script>
    
    <link rel="preload" href="/assets/css/0.styles.0a94a68e.css" as="style"><link rel="preload" href="/assets/js/app.8d42fabb.js" as="script"><link rel="preload" href="/assets/js/6.aea618f8.js" as="script"><link rel="preload" href="/assets/js/4.20006588.js" as="script"><link rel="preload" href="/assets/js/21.b5e744b7.js" as="script"><link rel="preload" href="/assets/js/7.403b6e6e.js" as="script"><link rel="prefetch" href="/assets/js/1.5cbf5643.js"><link rel="prefetch" href="/assets/js/10.3ae75870.js"><link rel="prefetch" href="/assets/js/11.a447f3c3.js"><link rel="prefetch" href="/assets/js/12.0449ba3d.js"><link rel="prefetch" href="/assets/js/13.75011fc7.js"><link rel="prefetch" href="/assets/js/14.572779d4.js"><link rel="prefetch" href="/assets/js/15.d8496b36.js"><link rel="prefetch" href="/assets/js/16.3c7370c7.js"><link rel="prefetch" href="/assets/js/17.f10c6f39.js"><link rel="prefetch" href="/assets/js/18.1abb8aa8.js"><link rel="prefetch" href="/assets/js/19.5ca12b0a.js"><link rel="prefetch" href="/assets/js/20.e1896da5.js"><link rel="prefetch" href="/assets/js/22.01ca19aa.js"><link rel="prefetch" href="/assets/js/23.2aa5172f.js"><link rel="prefetch" href="/assets/js/24.92afe763.js"><link rel="prefetch" href="/assets/js/25.fad419e7.js"><link rel="prefetch" href="/assets/js/26.24545015.js"><link rel="prefetch" href="/assets/js/27.510e6dd2.js"><link rel="prefetch" href="/assets/js/28.12988af6.js"><link rel="prefetch" href="/assets/js/29.44772bc6.js"><link rel="prefetch" href="/assets/js/30.a1349a06.js"><link rel="prefetch" href="/assets/js/31.0d024f90.js"><link rel="prefetch" href="/assets/js/32.e66d53ec.js"><link rel="prefetch" href="/assets/js/33.96fc1f36.js"><link rel="prefetch" href="/assets/js/34.fd98863d.js"><link rel="prefetch" href="/assets/js/35.388ea9a8.js"><link rel="prefetch" href="/assets/js/36.1d19334a.js"><link rel="prefetch" href="/assets/js/5.ef32696c.js"><link rel="prefetch" href="/assets/js/8.c5b9daff.js"><link rel="prefetch" href="/assets/js/9.42728225.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.dd605d22.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0a94a68e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Menfre Blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Menfre Blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        认真学习 kubernetes——搭建 Harbor
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Menfre</span> <span itemprop="address">   in Shenzhen</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-05-06T00:00:00.000Z">
      2020-05-06
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-d832e844><a href="/tag/k8s" data-v-d832e844> k8s </a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>通常情况下我们需要一个类似 Java Maven Nexus 一样的私库作为我们私有注册中心以便用来维护我们的应用容器。</p> <h2 id="_1-docker-compose"><a href="#_1-docker-compose" class="header-anchor">#</a> 1. docker-compose</h2> <p>这里我们选择 docker-compose 的方式来安装。<a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener noreferrer">查询 docker-compose releases<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这里我们下载的版本是 <a href="https://github.com/docker/compose/releases/tag/1.26.0-rc4" target="_blank" rel="noopener noreferrer">1.26.0-rc4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，选择二进制文件  <a href="https://github.com/docker/compose/releases/download/1.26.0-rc4/docker-compose-Linux-x86_64" target="_blank" rel="noopener noreferrer">docker-compose-Linux-x86_64<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这里我是通过本地 download 然后 scp 到虚拟机服务器的方式来安装。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> docker-compose-Linux-x86_64 ubuntu0:/usr/local/bin
</code></pre></div><blockquote><p>这里的 ubuntu0 等价于 mendora@192.168.3.35。默认 /usr/local/bin 其他用户是没有写入权限的，我们需要添加 chmod 777 /usr/local/bin。或者通过 scp 到其他目录，再 mv 到 /usr/local/bin</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/bin <span class="token operator">&amp;&amp;</span> <span class="token function">mv</span> docker-compose-Linux-x86_64 docker-compose
<span class="token function">chmod</span> +x docker-compose
</code></pre></div><p>确认下安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mendora@k8s-master:/usr/local/bin$ docker-compose --version
docker-compose version <span class="token number">1.25</span>.5, build 8a1c60f6
</code></pre></div><h2 id="_2-离线安装-harbor"><a href="#_2-离线安装-harbor" class="header-anchor">#</a> 2. 离线安装 Harbor</h2> <p><a href="https://github.com/goharbor/harbor/releases" target="_blank" rel="noopener noreferrer">查询 harbor releases<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>这里我们下载的版本是 <a href="https://github.com/goharbor/harbor/releases/tag/v2.0.0-rc2" target="_blank" rel="noopener noreferrer">v2.0.0-rc2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，选择压缩包 <a href="https://github.com/goharbor/harbor/releases/download/v2.0.0-rc2/harbor-offline-installer-v2.0.0-rc2.tgz" target="_blank" rel="noopener noreferrer">harbor-offline-installer-v2.0.0-rc2.tgz<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> harbor-offline-installer-v2.0.0-rc2.tgz ubuntu0:/opt
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /opt <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> -zxvf harbor-offline-installer-v2.0.0-rc2.tgz
<span class="token function">mkdir</span> installed <span class="token operator">&amp;&amp;</span> <span class="token function">mv</span> harbor-offline-installer-v2.0.0-rc2.tgz ./installed
</code></pre></div><p>我们 cd 到 harbor 文件夹，能看到如下列表：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mendora@k8s-master:/opt$ <span class="token builtin class-name">cd</span> harbor <span class="token operator">&amp;&amp;</span> <span class="token function">ls</span>
common.sh  harbor.v2.0.0.tar.gz  harbor.yml.tmpl  install.sh  LICENSE  prepare
</code></pre></div><p>接下来我们需要修改 harbor.yml.tmpl 配置文件，此时配置文件是临时的还不能被使用。我需要修改一下并重命名。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vim</span> harbor.yml.tmpl
<span class="token function">mv</span> harbor.yml.tmpl harbor.yml
</code></pre></div><h3 id="_2-1-配置-https"><a href="#_2-1-配置-https" class="header-anchor">#</a> 2.1 配置 https</h3> <h4 id="_2-1-1-配置域名"><a href="#_2-1-1-配置域名" class="header-anchor">#</a> 2.1.1 配置域名</h4> <p>配置一个虚拟的域名，以方便后续的镜像推送和拉取。
在需要访问 harbor 的机器上设置 hosts。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token number">192.168</span>.3.35 harbor.com <span class="token operator">&gt;&gt;</span> /etc/hosts
</code></pre></div><h4 id="_2-1-2-自签名证书"><a href="#_2-1-2-自签名证书" class="header-anchor">#</a> 2.1.2 自签名证书</h4> <p>这里我们是在本地环境部署的 harbor 并不需要真的买一个证书，这里我们采用自签名证书即可。<br>
这里我们通过 openssl 来生成。</p> <blockquote><p>记得在证书生成的过程中将 harbor.com 换成你自己的域名。</p></blockquote> <h5 id="ca-证书"><a href="#ca-证书" class="header-anchor">#</a> CA 证书</h5> <p>生成 CA 私钥：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>openssl genrsa -out ca.key <span class="token number">4096</span>
</code></pre></div><p>生成 CA 证书：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>openssl req -x509 -new -nodes -sha512 -days <span class="token number">3650</span> <span class="token punctuation">\</span>
 -subj <span class="token string">&quot;/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=harbor.com&quot;</span> <span class="token punctuation">\</span>
 -key ca.key <span class="token punctuation">\</span>
 -out ca.crt
</code></pre></div><h5 id="服务器证书"><a href="#服务器证书" class="header-anchor">#</a> 服务器证书</h5> <p>生成私钥：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>openssl genrsa -out harbor.com.key <span class="token number">4096</span>
</code></pre></div><p>生成 CSR:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>openssl req -sha512 -new <span class="token punctuation">\</span>
    -subj <span class="token string">&quot;/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=harbor.com&quot;</span> <span class="token punctuation">\</span>
    -key harbor.com.key <span class="token punctuation">\</span>
    -out harbor.com.csr
</code></pre></div><p>生成 x509 v3 扩展文件：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> <span class="token operator">&gt;</span> v3.ext <span class="token operator">&lt;&lt;-</span><span class="token string">EOF
authorityKeyIdentifier=keyid,issuer
basicConstraints=CA:FALSE
keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
extendedKeyUsage = serverAuth
subjectAltName = @alt_names

[alt_names]
DNS.1=harbor.com
DNS.2=harbor
DNS.3=192.168.3.35
EOF</span>
</code></pre></div><p>使用 v3.ext 为我们的机器生成证书：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>openssl x509 -req -sha512 -days <span class="token number">3650</span> <span class="token punctuation">\</span>
    -extfile v3.ext <span class="token punctuation">\</span>
    -CA ca.crt -CAkey ca.key -CAcreateserial <span class="token punctuation">\</span>
    -in harbor.com.csr <span class="token punctuation">\</span>
    -out harbor.com.crt
</code></pre></div><h4 id="_2-1-3-为-docker-和-harbor-提供证书"><a href="#_2-1-3-为-docker-和-harbor-提供证书" class="header-anchor">#</a> 2.1.3 为 Docker 和 harbor 提供证书</h4> <p>复制证书到 harbor 主机上：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cp</span> harbor.com.crt /opt/harbor/data/cert/
<span class="token function">cp</span> harbor.com.key /opt/harbor/data/cert/
</code></pre></div><blockquote><p>默认 harboar data 目录是在 /data，因此你需要复制证书到 /data/cert/ 下。data 目录可以在 harbor.yml 中配置。</p></blockquote> <p>将 harbor.com.crt 转换为 harbor.com.cert 以便给 Docker 使用：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>openssl x509 -inform PEM -in harbor.com.crt -out harbor.com.cert
</code></pre></div><p>拷贝服务器证书以及 CA 文件到 Docker 证书目录下：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cp</span> harbor.com.cert /etc/docker/certs.d/harbor.com/
<span class="token function">cp</span> harbor.com.key /etc/docker/certs.d/harbor.com/
<span class="token function">cp</span> ca.crt /etc/docker/certs.d/harbor.com/
</code></pre></div><p>重启Docker:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>systemctl restart docker
</code></pre></div><p>最后你能看到 docker 的证书目录：</p> <div class="language-text extra-class"><pre class="language-text"><code>/etc/docker/certs.d/
    └── harbor.com:port
       ├── harbor.com.cert  &lt;-- Server certificate signed by CA
       ├── harbor.com.key   &lt;-- Server key signed by CA
       └── ca.crt               &lt;-- Certificate authority that signed the registry certificate
</code></pre></div><h4 id="_2-1-4-配置-harbor-yml"><a href="#_2-1-4-配置-harbor-yml" class="header-anchor">#</a> 2.1.4  配置 harbor.yml</h4> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">hostname</span><span class="token punctuation">:</span> harbor.com

<span class="token comment"># http related config</span>
<span class="token key atrule">http</span><span class="token punctuation">:</span>
  <span class="token comment"># port for http, default is 80. If https enabled, this port will redirect to https port</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token comment"># https related config</span>
<span class="token key atrule">https</span><span class="token punctuation">:</span>
  <span class="token comment"># https port for harbor, default is 443</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>
  <span class="token comment"># The path of cert and key files for nginx</span>
  <span class="token key atrule">certificate</span><span class="token punctuation">:</span> /opt/harbor/data/cert/harbor.com.crt
  <span class="token key atrule">private_key</span><span class="token punctuation">:</span> /opt/harbor/data/cert/harbor.com.key
</code></pre></div><blockquote><p>这里除了配置域名和开启 https 外，还需要设置 admin 账户密码，数据库密码，data 目录等。按实际需要来配置就好。</p></blockquote> <h3 id="_2-2-启动脚本"><a href="#_2-2-启动脚本" class="header-anchor">#</a> 2.2 启动脚本</h3> <p>启动安装脚本：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./prepare.sh
./install.sh
</code></pre></div><p>看到如下信息代表安装完成了。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Creating network <span class="token string">&quot;harbor_harbor&quot;</span> with the default driver
Creating harbor-log <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating harbor-portal <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating redis         <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating registry      <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating harbor-db     <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating registryctl   <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating harbor-core   <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating harbor-jobservice <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Creating nginx             <span class="token punctuation">..</span>. <span class="token keyword">done</span>
✔ ----Harbor has been installed and started successfully.----
</code></pre></div><p>访问我们的 harbor。</p> <div class="language-http extra-class"><pre class="language-http"><code><span class="token header-name keyword">https:</span>//harbor.com
</code></pre></div><p>使用 admin/[你设置的 admin 密码] 完成登录。</p> <p><img src="/image/harbor.png" alt="harbor"></p> <p>下一章我们将使用 harbor 来分发和部署我们的容器应用。</p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ol><li><a href="https://www.cnblogs.com/majiang/p/11218792.html" target="_blank" rel="noopener noreferrer">dz45693<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://goharbor.io/docs/1.10/install-config/run-installer-script/" target="_blank" rel="noopener noreferrer">官方文档——Run the Installer Script<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <div class="gitalk-container"><div id="gitalk-container"></div></div> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#_1-docker-compose" title="1. docker-compose">1. docker-compose</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_2-离线安装-harbor" title="2. 离线安装 Harbor">2. 离线安装 Harbor</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-1-配置-https" title="2.1 配置 https">2.1 配置 https</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-2-启动脚本" title="2.2 启动脚本">2.2 启动脚本</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#参考资料" title="参考资料">参考资料</a></div></div></div></div> <footer class="footer" data-v-fdbf4940><div class="footer-left-wrap" data-v-fdbf4940><ul class="contact" data-v-fdbf4940><li class="contact-item" data-v-fdbf4940><a href="https://github.com/347255699" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-fdbf4940><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-fdbf4940><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-fdbf4940></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-fdbf4940><ul class="copyright" data-v-fdbf4940><li class="copyright-item" data-v-fdbf4940><a href="/2020/05/06/kubernetes2/.html" class="nav-link" data-v-fdbf4940>Copyright © 2020 Menfre Blog.</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8d42fabb.js" defer></script><script src="/assets/js/6.aea618f8.js" defer></script><script src="/assets/js/4.20006588.js" defer></script><script src="/assets/js/21.b5e744b7.js" defer></script><script src="/assets/js/7.403b6e6e.js" defer></script>
  </body>
</html>
