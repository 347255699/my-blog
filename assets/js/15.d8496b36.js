(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{355:function(t,s,e){"use strict";e.r(s);var a=e(9),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),e("p",[t._v("这里是接上 【开篇：使用 VuePress 搭建个人 Blog】 写的，主要是觉得没有自定义域名称不上博客，还有在配置 dns 解析时踩了坑，所以需要记录一下。")]),t._v(" "),e("h2",{attrs:{id:"域名购买"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#域名购买"}},[t._v("#")]),t._v(" 域名购买")]),t._v(" "),e("p",[t._v("这里我选择国外的域名注册商 "),e("code",[t._v("namesilo")]),t._v("，选择它的原因很简单，不用备案，便宜，还可以用 "),e("code",[t._v("alipay")]),t._v(" 支付。")]),t._v(" "),e("p",[t._v("打开主页，能感受到 "),e("code",[t._v("namesilo")]),t._v(" 有一定历史了。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/image/namesilo.jpg",alt:"namesilo"}})]),t._v(" "),e("p",[t._v("大概步骤如下：")]),t._v(" "),e("ol",[e("li",[t._v("点击右上角 Create New Account 按钮创建账号，填写一些个人信息，可以填中文。")]),t._v(" "),e("li",[t._v("点击 Log In ，填写 Username 和 Password 登录。")]),t._v(" "),e("li",[t._v("找到 domain search，检索自己喜欢的域名，加到购物车，使用 alipay 买单。")])]),t._v(" "),e("p",[t._v("对于经常网上购物的人来说问题不是很大。")]),t._v(" "),e("h2",{attrs:{id:"域名解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#域名解析"}},[t._v("#")]),t._v(" 域名解析")]),t._v(" "),e("p",[t._v("点击右上角 Manage My Domains, 进入管理界面。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/image/domain-manage.jpg",alt:"domain-manage"}})]),t._v(" "),e("p",[t._v("找到 domain 列表，这里我购买的域名是 "),e("code",[t._v("menfre.info")]),t._v("，鼠标移动到右边 Options 列中蓝色圆球上。你能看到上面的 tips 是 "),e("code",[t._v("Manage DNS for this domain")]),t._v("。")]),t._v(" "),e("p",[t._v("Ok，接下来点击它进入 DNS 解析页面。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/image/manage-dns.jpg",alt:"manage-dns"}})]),t._v(" "),e("p",[t._v("我们总共需要添加两条解析记录，一条 A 类型 和 一条 CName 类型。实际生效是 CName 类型这条解析记录。\n这里以我的 Github Pages 地址为例，这里是将 "),e("code",[t._v("www.menfre.info")]),t._v(" 解析到 "),e("code",[t._v("347255699.github.io")]),t._v(" 上，即为我的 Github Pages 取了别名。\n而我们添加的 A 记录，主要是将 "),e("code",[t._v("menfre.info")]),t._v(" 解析到 "),e("code",[t._v("192.30.252.153")]),t._v(" 地址上。这里 "),e("code",[t._v("192.30.252.153")]),t._v(" 我没有深究是什么地址。但大概能了解它的作用是将 "),e("code",[t._v("menfre.info")]),t._v(" 的流量转发到 "),e("code",[t._v("www.menfre.info")]),t._v(" 上。")]),t._v(" "),e("p",[t._v("【注意】配置完成后，需要等待 30 分钟以上以保证解析生效并同步到全球 DNS 服务器上，不要马上去验证解析生效没有。")]),t._v(" "),e("p",[t._v("到这里我们就成功将 "),e("code",[t._v("menfre.info")]),t._v(" 和 "),e("code",[t._v("www.menfre.info")]),t._v(" 解析到 "),e("code",[t._v("347255699.github.io")]),t._v(" 上了。")]),t._v(" "),e("h2",{attrs:{id:"配置-github-pages-自定义域名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-github-pages-自定义域名"}},[t._v("#")]),t._v(" 配置 Github Pages 自定义域名")]),t._v(" "),e("p",[t._v("最后我们需要在 "),e("code",[t._v("blog/.vuepress/dist/")]),t._v(" 目录中生成一个 CNAME 文件，并将我们的域名 "),e("code",[t._v("www.menfre.info")]),t._v(" 写入到文件提交到 Github 仓库上完成域名配置。我们将这个操作写到 "),e("code",[t._v("deploy.sh")]),t._v(" 中。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/usr/bin/env sh")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 确保脚本抛出遇到的错误")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -e\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成静态文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入生成的文件夹")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" blog/.vuepress/dist\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果是发布到自定义域名")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'www.menfre.info'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" CNAME\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果发布到 https://<USERNAME>.github.io/<REPO>")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -f git@github.com:347255699/my-blog.git master:gh-pages\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" -\n")])])]),e("p",[t._v("执行 "),e("code",[t._v("./delpoy.sh")]),t._v(" 完成部署。")]),t._v(" "),e("p",[t._v("还有需要在 Github 仓库的 Settings 中的 GitHub Pages配置上钩上 "),e("code",[t._v("Enforce HTTPS")]),t._v("。")]),t._v(" "),e("p",[t._v("配置中有一项 Custom domain，这里的配置等同于我们创建的 CNAME 文件都是配置自定义域名。")]),t._v(" "),e("p",[e("img",{attrs:{src:"/image/github-settings.jpg",alt:"github-settings"}})]),t._v(" "),e("comment")],1)}),[],!1,null,null,null);s.default=n.exports}}]);